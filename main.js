(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t,r,n){return(r=function(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var o=document.querySelector(".draw"),c=document.querySelector("#file"),i=document.querySelector(".addText"),a=document.querySelector(".saveMeme"),u=document.querySelector("#textSelect"),l=document.querySelector("#xInteractive"),d=document.querySelector("#yInteractive"),f=document.querySelector("#colorInteractive"),s=document.querySelector("#fzInteractive"),m={selected:null},y=function(e,t){return console.log(m),t.appendChild(e)},v=function(e){o.querySelectorAll("canvas").forEach((function(t){if(t.dataset.id===e)return o.removeChild(t)}))},p=function(e){var t=e.text,r=e.x,n=e.y,c=e.color,i=e.fz,a=document.createElement("canvas");a.width=400,a.height=400,a.id="".concat(Math.floor(1999329*Math.random())),a.dataset.id=t;var u=a.getContext("2d");return u.strokeStyle=c,u.font="".concat(i,"px serif"),u.strokeText(t,r,n),g(t),y(a,o)},g=function(e){var t=document.createElement("option"),r=Array.from(document.querySelectorAll("option"));t.value=e,t.id=e,t.dataset.id=e,t.innerText=e,r.some((function(t){return t.dataset.id===e}))||u.appendChild(t)},b=function(e){m.selected=e.target.options[e.target.selectedIndex].text},h=function(e,t){var n=t.target.value,o=m.selected;switch(e){case"x":m[o]=r(r({},m[o]),{},{x:n}),v(o),p(m[o]);break;case"y":m[o]=r(r({},m[o]),{},{y:n}),v(o),p(m[o]);break;case"color":m[o]=r(r({},m[o]),{},{color:n}),v(o),p(m[o]);break;case"fz":m[o]=r(r({},m[o]),{},{fz:n}),v(o),p(m[o])}},S=function(){var e=document.createElement("a"),t=document.querySelector("#image"),r=t.getContext("2d");Object.keys(m).filter((function(e){return"selected"!==e})).forEach((function(e){r.strokeStyle=m[e].color,r.font="".concat(m[e].fz,"px serif"),r.strokeText(m[e].text,m[e].x,m[e].y)})),e.href=t.toDataURL("image/jpeg"),e.download="meme.jpg",document.querySelector("main").appendChild(e),e.click(),document.querySelector("main").removeChild(e)},x=function(e){var t,r=e.target;return(t=o.querySelector("#image")||!1)&&o.removeChild(t),function(e){var t=document.createElement("canvas");t.width=400,t.height=400,t.id="image";var r=t.getContext("2d"),n=new FileReader;n.onload=function(e){var n=new Image;n.onload=function(){r.clearRect(0,0,t.width,t.height),r.drawImage(n,0,0,t.width,t.height),y(t,o)},n.src=e.target.result},n.readAsDataURL(e.files[0])}(r)};document.addEventListener("DOMContentLoaded",(function(){c.addEventListener("change",x),i.addEventListener("click",(function(e){return function(e,t){var o=e.target.closest(".text-settings"),c=null;Array.from(o.querySelectorAll("input")).forEach((function(e){"text"===e.id&&(c=e.value,m[e.value]={}),m[c]=r(r({},m[c]),{},n({},e.id,e.value))})),p(m[c]),console.log(m[c])}(e)})),l.addEventListener("input",(function(e){return h("x",e)})),d.addEventListener("input",(function(e){return h("y",e)})),f.addEventListener("input",(function(e){return h("color",e)})),s.addEventListener("input",(function(e){return h("fz",e)})),u.addEventListener("change",b),a.addEventListener("click",S)}))})();